---
- project:
    name: integration-docker
    project-name: 'integration'
    jobs:
      - '{project-name}-{stream}-{subproject}-docker-merge'
      - '{project-name}-{stream}-{subproject}-docker-verify'
    project: 'integration'
    stream:
      - 'master':
          branch: 'master'
    subproject:
      - 'sniroemulator':
          pom: 'test/mocks/sniroemulator/pom.xml'
          pattern: 'test/mocks/sniroemulator/**'
      - 'pnfsimulator':
          pom: 'test/mocks/pnfsimulator/pnfsimulator/pom.xml'
          pattern: 'test/mocks/pnfsimulator/pnfsimulator/**'
      - 'netconfsimulator':
          pom: 'test/mocks/pnfsimulator/netconfsimulator/pom.xml'
          pattern: 'test/mocks/pnfsimulator/netconfsimulator/**'
    mvn-settings: 'integration-settings'
    files: '**'
    archive-artifacts: ''

- project:
    name: integration-docker-compose
    project-name: 'integration'
    project: 'integration'
    stream:
      - 'master':
          branch: 'master'
    jobs:
      - '{project-name}-{stream}-{subproject}-docker-compose-verify':
          script: |
            #!/bin/bash
            cd $DOCKER_ROOT
            docker-compose up -d
    subproject:
      - 'netconf-pnp-simulator':
          pattern: 'test/mocks/netconf-pnp-simulator/modules/**'
          docker_root: 'test/mocks/netconf-pnp-simulator/modules'
